{"Version":"2019-10-30","StartAction":"Enable logging to CloudWatch","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"Set Voice to Matthew":{"position":{"x":395.2,"y":40},"isFriendlyName":true,"children":["Set Voice to Matthew-iGhnxU7qCo"],"overrideConsoleVoice":true,"fragments":{"SetContactData":"Set Voice to Matthew-iGhnxU7qCo"},"overrideLanguageAttribute":true},"Set Voice to Matthew-iGhnxU7qCo":{"position":{"x":395.2,"y":40},"isFriendlyName":true,"dynamicParams":[]},"GoodBye":{"position":{"x":916.8,"y":40.8},"isFriendlyName":true},"Integrate with Amazon Lex":{"position":{"x":636,"y":38.4},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"TestBotAlias","useLexBotDropdown":true,"lexV2BotName":"TestPutSessionBot"}}},"useLexBotDropdown":true,"lexV2BotName":"TestPutSessionBot","lexV2BotAliasName":"TestBotAlias","conditionMetadata":[{"id":"99f714c4-b03e-4eb0-929c-60a5c5fb4492","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Agent"}]},"Set the desired queue":{"position":{"x":920.8,"y":272.8},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"Error prompt":{"position":{"x":1464,"y":517.6},"isFriendlyName":true},"77d96f60-031d-40d2-8a58-d77595e74876":{"position":{"x":1461.6,"y":36.8}},"Transfer the call or chat to the queue":{"position":{"x":1194.4,"y":274.4},"isFriendlyName":true},"Queue at capacity":{"position":{"x":1448,"y":268},"isFriendlyName":true},"Enable logging to CloudWatch":{"position":{"x":156.8,"y":39.2},"isFriendlyName":true}},"Annotations":[{"type":"default","id":"97b4b23d-db8f-4167-b414-cca229e5a641","content":"If you add an \"Agent\" intent to the bot with training utterances like \"I want to speak to an agent\", we would identify that the \"Agent\" intent had been triggered and route to the desired queue.","actionId":"","isFolded":false,"position":{"x":780,"y":416},"size":{"height":295,"width":300}},{"type":"default","id":"f2a69207-afd0-4ea9-b819-a55e6c644da0","content":"If you have configured a max capacity for the queue and the queue has reached that capacity.","actionId":"","isFolded":false,"position":{"x":2072,"y":299},"size":{"height":295,"width":300}}],"name":"BookHotel","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"TextToSpeechVoice":"Matthew","TextToSpeechEngine":"Neural","TextToSpeechStyle":"Conversational"},"Identifier":"Set Voice to Matthew","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"Set Voice to Matthew-iGhnxU7qCo"}},{"Parameters":{"LanguageCode":"en-US"},"Identifier":"Set Voice to Matthew-iGhnxU7qCo","Type":"UpdateContactData","Transitions":{"NextAction":"Integrate with Amazon Lex","Errors":[{"NextAction":"Integrate with Amazon Lex","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for contacting AnyCompany hotels. Goodbye!"},"Identifier":"GoodBye","Type":"MessageParticipant","Transitions":{"NextAction":"77d96f60-031d-40d2-8a58-d77595e74876","Errors":[{"NextAction":"77d96f60-031d-40d2-8a58-d77595e74876","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Welcome to any company hotel reservations. How can I help you today?","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:816924377644:bot-alias/REQWONNJG0/TSTALIASID"}},"Identifier":"Integrate with Amazon Lex","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"Error prompt","Conditions":[{"NextAction":"Set the desired queue","Condition":{"Operator":"Equals","Operands":["Agent"]}}],"Errors":[{"NextAction":"GoodBye","ErrorType":"NoMatchingCondition"},{"NextAction":"Error prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:104220062740:instance/46837cc7-8562-4b3f-92b2-1bae0ede624b/queue/3be556bf-5c00-453e-86d9-0823a4067d97"},"Identifier":"Set the desired queue","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"Transfer the call or chat to the queue","Errors":[{"NextAction":"Error prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Somthing went wrong. Please try again later. Goodbye."},"Identifier":"Error prompt","Type":"MessageParticipant","Transitions":{"NextAction":"77d96f60-031d-40d2-8a58-d77595e74876","Errors":[{"NextAction":"77d96f60-031d-40d2-8a58-d77595e74876","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"77d96f60-031d-40d2-8a58-d77595e74876","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"Transfer the call or chat to the queue","Type":"TransferContactToQueue","Transitions":{"NextAction":"Error prompt","Errors":[{"NextAction":"Queue at capacity","ErrorType":"QueueAtCapacity"},{"NextAction":"Error prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"We are experiencing higher than normal call valumes and are unable to queu your call. Please call again later."},"Identifier":"Queue at capacity","Type":"MessageParticipant","Transitions":{"NextAction":"77d96f60-031d-40d2-8a58-d77595e74876","Errors":[{"NextAction":"Error prompt","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"Enable logging to CloudWatch","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"Set Voice to Matthew"}}]}